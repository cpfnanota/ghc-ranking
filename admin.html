
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ranking GHC</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap" rel="stylesheet">
  <style>
    
    body {
      background: linear-gradient(135deg, #5e239d, #2a2af0);
    
      margin: 0;
      font-family: 'Orbitron', sans-serif;
      background: #121212;
      color: white;
      padding: 20px;
      box-shadow: 0 0 5px #7a5ee0;
}
    
    h1 {
      background: linear-gradient(to right, #ffffff, #9f7aea);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
      animation: fadeInDown 0.8s ease-out;
    
      text-align: center;
      font-size: 1.8em;
      margin-bottom: 20px;
      box-shadow: 0 0 5px #7a5ee0;
}
    
    .ranking-container {
      background-color: #3e2a6d;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 0 15px rgba(0,0,0,0.6);
    
      max-width: 500px;
      margin: 0 auto;
      box-shadow: 0 0 5px #7a5ee0;
}
    .jogador {
      background: linear-gradient(to right, #2a2a2a, #1c1c1c);
      border-radius: 12px;
      padding: 10px 16px;
      margin: 8px 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 0 5px rgba(0,0,0,0.5);
      box-shadow: 0 0 5px #7a5ee0;
}
    .pos {
      font-weight: bold;
      font-size: 1.1em;
      box-shadow: 0 0 5px #7a5ee0;
}
    .pts {
      font-size: 1em;
      display: flex;
      align-items: center;
      gap: 6px;
      box-shadow: 0 0 5px #7a5ee0;
}
    .fire {
      animation: pulse 0.9s infinite alternate;
      box-shadow: 0 0 5px #7a5ee0;
}
    @keyframes pulse {
      0% { transform: scale(1);   box-shadow: 0 0 5px #7a5ee0;
}
      100% { transform: scale(1.2);   box-shadow: 0 0 5px #7a5ee0;
}
      box-shadow: 0 0 5px #7a5ee0;
}
    
    button {
      transition: 0.2s;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    
      background-color: #4e6ef2;
      color: white;
      border: none;
      padding: 10px 18px;
      border-radius: 8px;
      font-weight: bold;
      font-size: 15px;
      cursor: pointer;
    transition: background-color 0.3s, transform 0.2s;
      margin: 12px auto;
    width: fit-content;
      display: block;
      box-shadow: 0 0 5px #7a5ee0;
}
  
    @keyframes fadeInDown {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .jogador, .jogador * {
      text-shadow: none !important;
      box-shadow: none !important;
    }
    </style>


</head>
<body>
  <h1>Ranking Graci Hold'em Club üèÜ</h1>

  <div class="ranking-container" id="ranking">
  
  </div>

  <form id="rodadaForm" style="text-align: center; margin-top: 30px;">
    <p>Registrar nova rodada (1¬∫ ao 10¬∫ lugar):</p>
    <div style="display: flex; flex-direction: column; align-items: center; gap: 8px; margin-bottom: 12px;">
      <input type="text" name="jogador1" placeholder="1¬∫ lugar" style="padding:6px;border-radius:5px;border:none;" />
<input type="text" name="jogador2" placeholder="2¬∫ lugar" style="padding:6px;border-radius:5px;border:none;" />
<input type="text" name="jogador3" placeholder="3¬∫ lugar" style="padding:6px;border-radius:5px;border:none;" />
<input type="text" name="jogador4" placeholder="4¬∫ lugar" style="padding:6px;border-radius:5px;border:none;" />
<input type="text" name="jogador5" placeholder="5¬∫ lugar" style="padding:6px;border-radius:5px;border:none;" />
<input type="text" name="jogador6" placeholder="6¬∫ lugar" style="padding:6px;border-radius:5px;border:none;" />
<input type="text" name="jogador7" placeholder="7¬∫ lugar" style="padding:6px;border-radius:5px;border:none;" />
<input type="text" name="jogador8" placeholder="8¬∫ lugar" style="padding:6px;border-radius:5px;border:none;" />
<input type="text" name="jogador9" placeholder="9¬∫ lugar" style="padding:6px;border-radius:5px;border:none;" />
<input type="text" name="jogador10" placeholder="10¬∫ lugar" style="padding:6px;border-radius:5px;border:none;" />
    </div>
    <button type="submit">Registrar Rodada ‚úÖ</button>
  </form>

  <button onclick="exportarImagem()">Exportar Ranking üì∏</button>
  <button onclick="resetarRanking()">Resetar Ranking üîÑ</button>


  
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js">
  function exportarJSON() {
    const blob = new Blob([JSON.stringify(jogadores, null, 2)], { type: "application/json" });
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = "ranking.json";
    a.click();
    URL.revokeObjectURL(url);
  }

</script>
<script>
  let jogadores = JSON.parse(localStorage.getItem("rankingGHC") || "[]");

  function atualizarRanking() {
    const container = document.getElementById("ranking");
    container.innerHTML = "";

    jogadores.sort((a, b) => b.pontos - a.pontos);

    jogadores.forEach((j, index) => {
      const medalhas = ['ü•á','ü•à','ü•â'];
      const pos = medalhas[index] || `${index + 1}¬∫`;
      const fire = index === 0 ? '<span class="fire">üî•</span>' : '';
      const item = document.createElement("div");
      item.className = "jogador";
      item.innerHTML = `
        <div class="pos">${pos} ${j.nome}</div>
        <div class="pts">${j.pontos} pts ${fire}</div>
      `;
      container.appendChild(item);
    });
  }

  function salvarRanking() {
    localStorage.setItem("rankingGHC", JSON.stringify(jogadores));
  }

  function resetarRanking() {
    localStorage.removeItem("rankingGHC");
    jogadores = [];
    atualizarRanking();
  }

  function exportarImagem() {
    const target = document.querySelector(".ranking-container");
    html2canvas(target, {
      scrollY: -window.scrollY,
      useCORS: true,
      backgroundColor: null
    }).then(canvas => {
      const link = document.createElement("a");
      link.download = "ranking_ghc.png";
      link.href = canvas.toDataURL("image/png");
      link.click();
    });
  }

  document.addEventListener("DOMContentLoaded", () => {
    atualizarRanking();

    const form = document.getElementById("rodadaForm");
    if (form) {
      form.addEventListener("submit", function(e) {
        e.preventDefault();
        const formData = new FormData(form);
        const nomesRodada = Array.from(formData.values()).map(n => n.trim().toLowerCase());
        const pontosPorColocacao = [10, 6, 4, 3, 2, 1, 1, 1, 1, 1];

        nomesRodada.forEach((nome, index) => {
          if (!nome) return;
          let jogador = jogadores.find(j => j.nome.toLowerCase() === nome);
          if (!jogador) {
            jogador = { nome: nome.charAt(0).toUpperCase() + nome.slice(1), pontos: 0 };
            jogadores.push(jogador);
          }
          jogador.pontos += pontosPorColocacao[index] || 0;
        });

        salvarRanking();
        atualizarRanking();
        form.reset();
      });
    }
  });

  function exportarJSON() {
    const blob = new Blob([JSON.stringify(jogadores, null, 2)], { type: "application/json" });
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = "ranking.json";
    a.click();
    URL.revokeObjectURL(url);
  }

</script>

  <button onclick="exportarJSON()">Exportar JSON üìÑ</button>


<script>
  async function enviarParaGitHub(rankingJSON) {
    const repo = "ghc-ranking";
    const owner = "cpfnanota";
    const path = "ranking.json";

    // Obtem SHA atual do arquivo
    const resGet = await fetch(`https://api.github.com/repos/${owner}/${repo}/contents/${path}`, {
      headers: {
        Authorization: `token ${token}`
      }
    });
    const file = await resGet.json();
    const sha = file.sha;

    const response = await fetch(`https://api.github.com/repos/${owner}/${repo}/contents/${path}`, {
      method: "PUT",
      headers: {
        Authorization: `token ${token}`,
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        message: "Ranking atualizado via painel",
        content: btoa(unescape(encodeURIComponent(rankingJSON))),
        sha: sha
      })
    });

    if (response.ok) {
      alert("Ranking enviado para o GitHub com sucesso!");
    } else {
      alert("Erro ao enviar para o GitHub.");
    }
  }

  // Modifica o evento de submit para incluir o envio autom√°tico
  document.addEventListener("DOMContentLoaded", () => {
    const form = document.getElementById("rodadaForm");
    if (form) {
      form.addEventListener("submit", async function(e) {
        e.preventDefault();
        const formData = new FormData(form);
        const nomesRodada = Array.from(formData.values()).map(n => n.trim().toLowerCase());
        const pontosPorColocacao = [10, 6, 4, 3, 2, 1, 1, 1, 1, 1];

        nomesRodada.forEach((nome, index) => {
          if (!nome) return;
          let jogador = jogadores.find(j => j.nome.toLowerCase() === nome);
          if (!jogador) {
            jogador = { nome: nome.charAt(0).toUpperCase() + nome.slice(1), pontos: 0 };
            jogadores.push(jogador);
          }
          jogador.pontos += pontosPorColocacao[index] || 0;
        });

        salvarRanking();
        atualizarRanking();
        const rankingJSON = JSON.stringify(jogadores, null, 2);
        await enviarParaGitHub(rankingJSON);
        form.reset();
      });
    }
  });
</script>

</body>
</html>
